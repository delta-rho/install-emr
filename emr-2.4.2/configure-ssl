# sudo openssl genrsa -des3 -out server.key 1024
# sudo openssl req -new -key server.key -out server.csr
# sudo cp server.key server.key.org
# sudo openssl rsa -in server.key.org -out server.key
# sudo openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt

# create self-signed cert
sudo openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 -subj "/C=US/ST=WA/L=Richland/O=PNNL/CN=bootcamp.pnnl.gov" -keyout /home/hadoop/server.key  -out /home/hadoop/server.crt

sudo chmod 600 /home/hadoop/server.*

echo "www-port=443" | sudo tee -a /etc/rstudio/rserver.conf
echo "ssl-enabled=1" | sudo tee -a /etc/rstudio/rserver.conf
echo "ssl-certificate=/home/hadoop/server.crt" | sudo tee -a /etc/rstudio/rserver.conf
echo "ssl-certificate-key=/home/hadoop/server.key" | sudo tee -a /etc/rstudio/rserver.conf

sudo rstudio-server restart